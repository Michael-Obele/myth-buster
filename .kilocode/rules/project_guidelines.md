# Kilo Code Project Guidelines for Myth Buster

This document outlines the specific guidelines and preferences to be followed by Kilo Code for the 'Myth Buster' project, derived from past interactions and agreed-upon architectural decisions.

## 1. Rate Limiting Implementation

*   **Strategy:** Implement the **Sliding Window Log** algorithm.
*   **Storage:** Use the **application's database (Prisma)** for storing rate limit states, not Redis.
*   **Identifiers:**
    *   **Authenticated Users:** Identify and rate limit by `user.id`.
    *   **Unauthenticated Users:** Identify and rate limit using a **`Visitor ID` generated by `fingerprint.js`**. This ID will be stored in the database.
*   **Error Handling:** Return `429 Too Many Requests` status code with `Retry-After`, `X-RateLimit-Limit`, `X-RateLimit-Remaining`, and `X-RateLimit-Reset` headers, along with a clear JSON error message.
*   **Configuration:** Rate limit parameters should be configurable via environment variables and a dedicated configuration module (`src/lib/server/rateLimitConfig.ts`).

## 2. Authentication

*   **Google OAuth:** Integrate **Google OAuth using Lucia Auth**.
*   **Migration Goal:** Plan for a future full migration to Google OAuth, potentially phasing out traditional username/password authentication.

## 3. Documentation Retrieval Strategy

When seeking documentation or information, follow this priority order:

1.  **Svelte-LLM (`svelte-llm`)**: Prioritize for Svelte 5 and SvelteKit documentation. Use `list_sections` and `get_documentation` tools.
2.  **Context7 (`github.com/upstash/context7-mcp`)**: Use if `svelte-llm` fails, or for documentation on other libraries (e.g., Shadcn-Svelte, Lucia Auth). Utilize `resolve-library-id` followed by `get-library-docs`.
3.  **Local Files (`src/lib/components/ui`)**: For understanding the implementation and usage of existing Shadcn-Svelte components, directly read files from this directory using `read_file`.

## 4. File System Operations

*   **Directory Creation:** Always use `mkdir -p` for creating new directories to ensure parent directories are created if they don't exist.
*   **Mode Switching:** Switch to `code` mode for any file system operations (e.g., `mkdir`, `rm`) or general CLI commands.

## 5. Project Planning and Documentation

*   **Architectural Plans:** Store all architectural plans, design documents, and similar strategic documents within the `plan_reformed` directory.
*   **Global Rules:** Store project-wide guidelines and rules within the `kilo_code_rules` directory.

## 6. General Best Practices

*   Maintain clean, readable, and well-commented code.
*   Ensure proper error handling and provide clear, actionable user feedback.
*   Consider performance implications for all architectural decisions, especially when dealing with database operations at scale.